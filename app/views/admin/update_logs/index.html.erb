<div class="container mx-auto px-6 py-10 bg-black/50 rounded-xl backdrop-blur-sm">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-semibold text-white">Update History</h1>
    <div class="space-x-2">
      <%= link_to 'Admin Dashboard', admin_root_path, class: 'px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-500 transition-colors' %>
      <%= link_to 'Back to Playlists', admin_playlists_path, class: 'px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors' %>
    </div>
  </div>

  <!-- Filter Buttons -->
  <div class="flex gap-2 mb-6">
    <%= link_to 'All Changes', admin_update_logs_path, 
                class: "px-4 py-2 rounded-lg #{params[:type].nil? ? 'bg-yellow-500 text-black' : 'bg-gray-700 text-white hover:bg-gray-600'} transition-colors" %>
    <%= link_to 'Tracks Added', admin_update_logs_path(type: 'track_added'), 
                class: "px-4 py-2 rounded-lg #{params[:type] == 'track_added' ? 'bg-green-500 text-black' : 'bg-gray-700 text-white hover:bg-gray-600'} transition-colors" %>
    <%= link_to 'Tracks Removed', admin_update_logs_path(type: 'track_removed'), 
                class: "px-4 py-2 rounded-lg #{params[:type] == 'track_removed' ? 'bg-red-500 text-white' : 'bg-gray-700 text-white hover:bg-gray-600'} transition-colors" %>
    <%= link_to 'Metadata Changes', admin_update_logs_path(type: 'playlist_metadata'), 
                class: "px-4 py-2 rounded-lg #{params[:type] == 'playlist_metadata' ? 'bg-blue-500 text-white' : 'bg-gray-700 text-white hover:bg-gray-600'} transition-colors" %>
  </div>

  <div class="bg-gray-900/80 rounded-xl p-6 border border-gray-700">
    <% if @update_logs.any? %>
      <div class="space-y-4">
        <% @update_logs.each do |log| %>
          <div class="bg-gray-800/50 rounded-lg p-4 border border-gray-700 hover:border-gray-600 transition-colors">
            <div class="flex items-start justify-between gap-4">
              <div class="flex-1">
                <!-- Playlist Title -->
                <div class="text-white font-semibold mb-2">
                  <%= link_to log.playlist.title, admin_playlist_path(log.playlist), class: "hover:text-yellow-400 transition-colors" %>
                </div>
                
                <!-- Change Type Badge -->
                <div class="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-2
                  <%= case log.log_type
                      when 'track_added' then 'bg-green-500/20 text-green-400 border border-green-500/50'
                      when 'track_removed' then 'bg-red-500/20 text-red-400 border border-red-500/50'
                      when 'playlist_metadata' then 'bg-blue-500/20 text-blue-400 border border-blue-500/50'
                      end %>">
                  <%= log.log_type.humanize %>
                </div>
                
                <!-- Change Summary -->
                <div class="text-gray-300 text-sm">
                  <%= log.display_summary %>
                </div>
                
                <!-- Track Details (if applicable) -->
                <% if log.track.present? %>
                  <div class="mt-2 flex items-center gap-3">
                    <% if log.track.image_url.present? %>
                      <img src="<%= log.track.image_url %>" alt="<%= log.track.name %>" class="w-12 h-12 rounded shadow-lg">
                    <% end %>
                    <div>
                      <div class="text-white font-medium"><%= log.track.name %></div>
                      <div class="text-gray-400 text-sm"><%= log.track.artist %></div>
                    </div>
                    <% if log.track.external_url.present? %>
                      <%= link_to 'üéµ', log.track.external_url, target: '_blank', 
                                  class: 'text-green-400 hover:text-green-300 text-xl ml-auto', 
                                  title: 'Open in Spotify' %>
                    <% end %>
                  </div>
                <% end %>
              </div>
              
              <!-- Timestamp -->
              <div class="text-right text-sm flex-shrink-0">
                <div class="text-gray-400"><%= time_ago_in_words(log.created_at) %> ago</div>
                <div class="text-gray-500 text-xs"><%= log.created_at.strftime("%b %d, %Y %I:%M %p") %></div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
      
      <%= paginate @update_logs %>
    <% else %>
      <div class="text-center py-12">
        <div class="text-6xl mb-4">üìù</div>
        <h3 class="text-2xl font-bold text-white mb-4">No Updates Yet</h3>
        <p class="text-gray-400 mb-6">Start updating playlists to see change history here.</p>
        <%= link_to 'Go to Playlists', admin_playlists_path, 
                    class: 'px-6 py-3 bg-yellow-500 text-black rounded-lg hover:bg-yellow-400 transition-colors font-semibold' %>
      </div>
    <% end %>
  </div>
</div>

